import ColorSpan from "../components/ColorSpan";
import CheatSheetCards from "../components/CheatSheetCards";
import MCPShields from "../components/MCPShields";
import AddGiwaNetworkButton from "../components/AddGiwaNetworkButton";

## What is Nodit?

<ColorSpan color="var(--cheatsheet-nodit-color)">Nodit</ColorSpan>은 Web3
개발자를 위한 멀티체인(multichain) 플랫폼이에요. 여러 퍼블릭 블록체인 체인에
대해 노드 접속, 데이터 조회, 이벤트 구독 같은 기능을 통합된 인프라로서 제공해요.

각 체인의 노드를 직접 운영하거나, 체인별 데이터 구조를 일일이 맞춰야 하는 번거로움 없이 **“표준화된 API + 안정적 노드 인프라”**
를 통해 블록체인 데이터를 간편하게 사용할 수 있어요.

Nodit은 **GIWA Sepolia Testnet**을 지원하고, 아래와 같은 주요 기능을 제공해요.

<CheatSheetCards />

## Nodit - GIWA Quick Start Guide

- [Nodit 회원가입](https://id.lambda256.io/signup) 페이지에서 Email을 이용하거나 Google 계정을 이용하여 Nodit 콘솔에 가입할 수 있어요.
- [Get Started with Nodit](https://developer.nodit.io/docs/get-started-with-nodit) 가이드를 따라 생성된 API Key를 확인하고
  Nodit의 GIWA Node API, Web3 Data API, Webhook 사용을 바로 시작할 수 있어요.
- HTTP 헤더의 `X-API-KEY` 필드에 발급받은 API Key를 포함하여 Nodit의 다양한 API Endpoint에 요청을 보낼 수 있어요.
  공식 문서에서 제공하는 예제 코드를 문서에서 바로 호출해 볼 수도 있어요.
- [GIWA Quickstart](https://developer.nodit.io/reference/giwa-quickstart)에서 Nodit의 GIWA 네트워크 및 API의 지원 현황과 예시를 확인할 수 있어요.

## GIWA Sepolia Testnet Faucet

Nodit은 GIWA Sepolia Testnet을 위한 Faucet 페이지를 제공하고 있어요.

GIWA는 기초 자산으로 Ether(ETH)를 사용해요.

해커톤 진행을 위해 테스트넷 Ether가 필요한 경우, [GIWA Chain Sepolia Faucet](https://faucet.lambda256.io/giwa-sepolia)에서 지갑 주소를 입력해서 받을 수 있어요.

> [!TIP]
> 매 `24시간` 마다 `0.01 ETH` 만큼만 받을 수 있어요.

## Foundry / Hardhat Integration Guide

발급받은 Node RPC Endpoint를 주요 개발 도구인 Foundry와 Hardhat에서 연동할 수 있어요.
Nodit API Key와 EOA(Exteranlly Owned Account) Private Key를 안전한 저장소에 보관하고, 환경 변수로 안전하게 로드하도록 관리에 유의해주세요.

### Foundry 연동하기

```toml title="foundry.toml"
[rpc_endpoints]
giwa_sepolia = "https://giwa-sepolia.nodit.io/${NODIT_API_KEY}"
```

```shell title="Contract Deployment"
forge create --rpc-url giwa_sepolia --private-key $EOA_PRIVATE_KEY \
  src/{target_file}:{contract_name} --broadcast
```

### Hardhat 연동하기

```javascript title="hardhat.config.js"
const config = {
  solidity: "0.8.29",
  networks: {
    giwa_sepolia: {
      url: `https://giwa-sepolia.nodit.io/${process.env.NODIT_API_KEY}`,
      accounts: [process.env.EOA_PRIVATE_KEY],
    },
  },
};
```

```shell title="Contract Deployment"
npx hardhat ignition deploy ./ignition/modules/{target-file} \
  --network giwa_sepolia
```

## Nodit 주요 기능 활용 예제

### Network Provider Usage Example

아래 예제 코드는 Nodit이 제공하는 GIWA Sepolia Testnet API Endpoint를 네트워크 Provider로서 EVM 지갑에 추가하는 React 버튼 컴포넌트에요.

디앱 사용자가 이 버튼을 통해 GIWA Sepolia Testnet을 자신의 지갑에 쉽게 추가하고, 이후에 GIWA 체인과 상호작용할 수 있도록 도와줘요.

<details>
<summary>전체 코드 확인하기</summary>

```typescript title="AddGiwaSepoliaTestnetButton.tsx" {9-12}
import type { EIP1193Provider } from "viem";

declare global {
  interface Window {
    ethereum?: EIP1193Provider;
  }
}

// Nodit GIWA Node API endpoint (실제 키는 절대 공개 저장소에 올리지 마세요)
const NODIT_GIWA_RPC = `https://giwa-sepolia.nodit.io/${
  import.meta.env.NODIT_API_KEY
}`;

const GIWA_SEPOLIA_PARAMS = {
  chainId: "0x164ce", // 91342
  chainName: "GIWA Sepolia",
  nativeCurrency: {
    name: "Ether",
    symbol: "ETH",
    decimals: 18,
  },
  rpcUrls: [NODIT_GIWA_RPC],
  blockExplorerUrls: ["https://sepolia-explorer.giwa.io"],
};

export default function AddGiwaSepoliaTestnetButton() {
  const handleClick = async () => {
    if (!window.ethereum) {
      alert(
        "이더리움 지갑이 브라우저에 설치되어 있지 않아요. Metamask와 같은 이더리움 지갑을 설치해주세요."
      );
      return;
    }

    try {
      await window.ethereum.request({
        method: "wallet_addEthereumChain",
        params: [GIWA_SEPOLIA_PARAMS],
      });

      await window.ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: GIWA_SEPOLIA_PARAMS.chainId }],
      });
    } catch (error) {
      console.error("Failed to add GIWA Sepolia:", error);
      alert(
        "GIWA Sepolia Testnet을 추가하는데 오류가 발생했어요. 개발자 도구의 콘솔에서 자세한 사항을 확인하세요."
      );
    }
  };

  return (
    <button onClick={handleClick}>
      Add GIWA Sepolia to EVM Wallet (via Nodit Node API)
    </button>
  );
}
```

</details>

위의 코드가 아래와 같은 버튼으로 렌더링돼요.

<AddGiwaNetworkButton />

> [!WARNING]
>
> - 이 예제 버튼의 RPC Endpoint는 `https://giwa-sepolia.nodit.io/EXAMPLE_API_KEY` 라는 값으로 설정되어 있으니 실제로 지갑에 추가하지는 마세요.
> - API Key를 사용할 때는 환경 변수로 주입하는 방법을 사용하는 등 보안에 유의해야 해요.
> - 이 버튼은 EIP-1193을 지원하는 지갑(예: MetaMask)에서만 동작해요.

### Node API Usage Example

아래 예제 코드는 Nodit의 GIWA Node API에서 제공하는
[`eth_chainId`](https://developer.nodit.io/reference/giwa-eth_chainid) Endpoint를 이용하여
GIWA Sepolia Testnet의 Chain ID를 조회하는 코드에요.

```typescript title="eth_chainId Endpoint Example"
const url = "https://giwa-sepolia.nodit.io/";
const options = {
  method: "POST",
  headers: {
    accept: "application/json",
    "content-type": "application/json",
    "X-API-KEY": `${process.env.NODIT_API_KEY}`, // 실제 키는 절대 공개 저장소에 올리지 마세요
  },
  body: JSON.stringify({ id: 1, jsonrpc: "2.0", method: "eth_chainId" }),
};

fetch(url, options)
  .then((res) => res.json())
  .then((json) => console.log(json))
  .catch((err) => console.error(err));
```

이 Request에 대한 Response는 아래와 같아요.

```json title="eth_chainId Response"
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": "0x164ce"
}
```

`0x164ce` 값은 `91342`의 16진수 표현으로, GIWA Sepolia Testnet의 Chain ID와 일치하는 것을 확인할 수 있어요.

[`eth_chainId`](https://developer.nodit.io/reference/giwa-eth_chainid) Endpoint 명세의 우측 코드 블록에서 `Try It!` 버튼을 눌러서
문서에서 요청하여 확인할 수도 있어요.

이 외에도 Nodit GIWA Node API에는 다양하게 활용할 수 있는 Endpoint가 있어요.
자세한 내용은 [GIWA Node API](https://developer.nodit.io/reference/giwa-eth_blocknumber)에서 확인할 수 있어요.

### Web3 Data API Usage Example

아래 예제 코드는 Nodit의 GIWA Web3 Data API에서 제공하는
[Get Token Holders By Contract](https://developer.nodit.io/reference/giwa-gettokenholdersbycontract) Endpoint를 이용하여
특정 토큰의 홀더 목록을 조회하는 코드에요.

예제 코드에서 조회하는 토큰은 `NODIT HACKATHON TEST TOKEN` 이라는 이름과 `0x5F17D61cc174C60662662C54379F5F17E310d2b7` 이라는 컨트랙트 주소로 배포된
예제 ERC-20 토큰이에요.

```typescript title="Get Token Holders By Contract Endpoint Example"
const url =
  "https://web3.nodit.io/v1/giwa/sepolia/token/getTokenHoldersByContract";
const options = {
  method: "POST",
  headers: {
    accept: "application/json",
    "content-type": "application/json",
    "X-API-KEY": `${process.env.NODIT_API_KEY}`, // 실제 키는 절대 공개 저장소에 올리지 마세요
  },
  body: JSON.stringify({
    contractAddress: "0x5F17D61cc174C60662662C54379F5F17E310d2b7", // NODIT HACKATHON TEST TOKEN CA
  }),
};

fetch(url, options)
  .then((res) => res.json())
  .then((json) => console.log(json))
  .catch((err) => console.error(err));
```

코드를 통해 조회해 본 토큰 홀더 목록이
[GIWA Sepolia Testnet Block Explorer (Blockscout)](https://sepolia-explorer.giwa.io/token/0x5F17D61cc174C60662662C54379F5F17E310d2b7?tab=holders)
에서 일치하는지 확인할 수 있어요.

[Get Token Holders By Contract](https://developer.nodit.io/reference/giwa-gettokenholdersbycontract#body-params) Endpoint 명세에서
`Body Params`의 `contractAddress` 필드에 `0x5F17D61cc174C60662662C54379F5F17E310d2b7` 값을 입력하고 우측 코드 블록에서 `Try It!` 버튼을 눌러서
문서에서 요청하여 확인할 수도 있어요.

이 외에도 Nodit GIWA Web3 API에는 다양하게 활용할 수 있는 Endpoint가 있어요.
자세한 내용은 [GIWA Web3 API](https://developer.nodit.io/reference/giwa-gettokentransfersbyaccount)에서 확인할 수 있어요.

### Webhook Usage Example

Nodit Webhook은 블록체인에서 발생하는 이벤트를 실시간으로 감지하여, 해당 이벤트를 여러분이 지정한 Webhook Listener로 자동으로 전달해주는 기능이에요.

Polling 방식(주기적으로 API를 호출하는 방식)과 달리, Nodit이 이벤트를 감지하면 즉시 알려주기 때문에 훨씬 효율적이고 빠르게 온체인 이벤트 기반 서비스를 만들 수 있어요.

Webhook을 통해 이벤트를 수신하기 위해서는 접근 가능한 Webhook Listener의 Endpoint URL이 필요해요.

Webhook Listener는 여러분이 직접 Webhook Listener 서버를 구현하거나 Discord, Telegram 등 여러 다른 플랫폼을 이용할 수도 있어요.

[Webhook Quickstart](https://developer.nodit.io/reference/how-to-use-webhook)에서 Webhook을 사용하는 방법을 확인할 수 있어요.

> [!WARNING]
>
> Webhook을 활용할 때 주의해야 할 보안 사항을 [Webhook Security & Reliability](https://developer.nodit.io/reference/security-reliability)에서 꼭 확인해주세요.

## AI Powered Nodit Integration

### LLMs.txt

LLMs.txt는 LLM(Large Language Model)과 같은 AI가 웹 사이트의 컨텐츠를 좀 더 잘 이해할 수 있도록 도와주는 표준 파일이에요.

[https://developer.nodit.io/llms.txt](https://developer.nodit.io/llms.txt)에서 LLMs.txt를 확인할 수 있고,
이 링크를 AI에게 제공하면 AI가 전체 Nodit 개발자 문서의 내용을 빠르게 탐색하여 양질의 응답을 생성해요.

### MCP 이용하기

MCP(Model Context Protocol)는 AI가 외부 도구와 리소스에 표준화된 방식으로 연결할 수 있도록 하는 프로토콜이에요.
Nodit은 AI가 Nodit의 여러 기능을 이용할 수 있도록 여러분이 구동할 수 있는 MCP Server 구현체를 제공해요.

Nodit MCP Server를 이용하면 직접 코드 구현을 하지 않아도 AI가 복잡한 블록체인 데이터를 조회하고, 분석하고, 사용할 수 있어요.
자세한 내용은 [Nodit for AI - Nodit MCP✨](https://developer.nodit.io/docs/nodit-mcp)에서 확인할 수 있어요.

아래 버튼을 클릭하면 각각 Nodit MCP Github Repo와 npm 패키지로 이동할 수 있어요.

<MCPShields />

Remote MCP Server 연동을 지원하는 AI 도구를 사용중인 경우, 로컬 환경에서 직접 MCP 서버를 구동하지 않아도 Nodit MCP를 사용할 수 있어요.

아래와 같은 경우, 별도의 Local MCP Server 설치와 설정 과정 없이 바로 Nodit Remote MCP Server를 이용할 수 있어요.

- Claude (Enterprise 요금제, 또는 Pro/Max 요금제를 사용하는 경우)
- Cursor

Nodit Remote MCP Server와 연동하는 자세한 방법은
[How to Connect Remote MCP Server](https://developer.nodit.io/docs/nodit-mcp#how-to-connect-remote-mcp-server)에서 확인할 수 있어요.

Nodit Remote MCP Server를 Claude에서 연동하여 사용해본 [대화 스레드 예시](https://claude.ai/share/b1399fa3-9e92-45bb-b110-f50341bd953c)를 확인할 수 있어요.

## About GIWA

GIWA 체인은 OP 스택(OP Stack) 기반 이더리움(Ethereum) 레이어 2(Layer 2) 블록체인이에요.
GIWA 체인은 어렵게 느껴지던 웹3(Web3)의 장벽을 허물고, 누구나 쉽고 재밌게 사용할 수 있는 웹3 인프라를 제공하고자 해요.

현재 GIWA 체인 Mainnet은 출시되지 않은 상태이며, Nodit은 GIWA Sepolia Testnet을 지원하고 있어요.

GIWA 체인에 대한 좀 더 자세한 정보는 아래에서 확인할 수 있어요.

- [GIWA 공식 문서](https://docs.giwa.io/)
- [GIWA 체인에 연결하기](https://docs.giwa.io/get-started/connect-to-giwa)
- [이더리움과 GIWA의 차이](https://docs.giwa.io/network-information/diffs-ethereum-giwa)
- [GIWA 공식 컨트랙트 목록](https://docs.giwa.io/network-information/contracts)
- [GIWA Sepolia Testnet Explorer (Blockscout)](https://sepolia-explorer.giwa.io/)
